<header>
    <heading></heading>
</header>
<section id="sidebar">
    <sidebar></sidebar>
</section>
<section id="main">
  <div class="row" id="sessionTitle">
    <div class="banner">
      <h1>{{session.description}}</h1>
    </div>
  </div>
  <div id="currentPlayer" hidden>{{currentPlayerId}}</div>
  <div id="progress" hidden>{{progress}}</div>
  <div class="row" id="playersline">
    <div class="col-xs-12">
      <div id="timeline">
        <div class="dot" *ngFor="#account of accounts" id="account.id" [style]="space">
          <span></span>
          <p>{{account.name}}</p>
        </div>
        <div class="inside"></div>
      </div>
    </div>
  </div>

  <div class="row">
        <div id="gameGrid">
            <div *ngFor="#row of cardGrid">
                <div *ngFor="#item of row">
                    <img class="gameGridItem" 
                         (click)="onCardClick(item)"
                         [style]="item.visibility" 
                         src="resources/images/kandoe-card.png" 
                         alt="Kaart" 
                         data-toggle="tooltip" 
                         data-placement="top"
                         [title]="item.card.text"
                       />
                </div>
                
            </div>
        </div>
    </div>

  <div class="row">
    <h2>Mijn kaarten</h2>
    <ul id="cardlist" class="cardlist">
      <li *ngFor="#card of cards">
        <div class="col-xs-4 col-md-3">
          <div class="thumbnail">
            <p>{{ card.text }}</p>
          </div>
        </div>
      </li>
    </ul>
      <div class="col-xs-3">
          <button *ngIf="session.cardCreationAllowed" type="button" id="newcard" class="btn btn-info btn-lg" data-toggle="modal" data-target="#createCardModal">Nieuwe kaart</button>
      </div>
  </div>
</section>

<!-- Chatbox -->
<div id="fixed">
    <div class="fixedHeader">Chat</div>
    <div class="fixedContent">
        <ul class="list-unstyled media-block">
            <li class="mar-btm">
                <div class="media-left">
                    <img src="http://bootdey.com/img/Content/avatar/avatar1.png" class="img-circle img-sm" alt="Profile Picture">
                </div>
                <div class="media-body pad-hor">
                    <div class="speech">
                        <a href="#" class="media-heading">Jos</a>
                        <p>Hallo Jef, hoe ist?</p>
                        <p class="speech-time">
                            <span class="glyphicon glyphicon-time" aria-hidden="true"></span> 09:23AM
                        </p>
                    </div>
                </div>
            </li>
            <li class="mar-btm">
                <div class="media-right">
                    <img src="http://bootdey.com/img/Content/avatar/avatar2.png" class="img-circle img-sm" alt="Profile Picture">
                </div>
                <div class="media-body pad-hor speech-right">
                    <div class="speech">
                        <a href="#" class="media-heading">Jef</a>
                        <p>Goe Jos, me jou?</p>
                        <p class="speech-time">
                            <span class="glyphicon glyphicon-time" aria-hidden="true"></span> 09:24AM
                        </p>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div class="chatbox">
        <div class="row" style="height: 3em;">
            <div class="col-xs-9">
                <input type="text" placeholder="Typ hier je bericht" id="chatMessageInput" class="form-control chat-input userinput">
            </div>
            <div class="col-xs-3">
                <button class="btn btn-primary btn-block" id="sendChatMessage" type="submit">Verzend</button>
                <button type="button" id="autoAddChatMessage" (click)="addChatMessage()" hidden></button>
                <button type="button" id="autoGetChatMessages" (click)="getChatMessages()"></button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div id="chooseCardModal" class="modal fade" role="form">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button id="newcard" type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Kaarten kiezen</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <p>Alle kaarten</p>
                    <ul id="allcardlist" class="cardlistModal">
                        <li *ngFor="#cardd of allCards">
                            <div class="col-xs-3 col-md-2">
                                <div class="thumbnail">
                                    <p>{{ cardd.text }}</p>
                                    <button type="button" class="btn btn-info" (click)="onAddCard(cardd)">Kies</button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="row">
                    <p>Gekozen kaarten</p>
                    <br />
                    <ul id="mycardlist" class="cardlistModal">
                        <li *ngFor="#carddd of myCards">
                            <div class="col-xs-3 col-md-2">
                                <div class="thumbnail">
                                    <p>{{ carddd.text }}</p>
                                    <button type="button" class="btn btn-info" (click)="onRemoveCard(carddd)">Verwijder</button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="row">
                    <button type="button" class="btn btn-default" data-dismiss="modal" (click)="submitCards()">Start</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div id="createCardModal" class="modal fade" role="form">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button id="newcard" type="button" class="close" data-dismiss="modal" (click)="onCloseModal()">&times;</button>
                <h4 class="modal-title">Nieuwe kaart</h4>
            </div>
            <div class="modal-body">

                <!-- Create organisation form -->
                <form (ngSubmit)="addCard()" #organisationForm="ngForm">
                    <div class="form-group">
                        <label for="description">Beknopte omschrijving</label>
                        <input id="newcardtext" type="text" class="form-control" required="" [(ngModel)]="model.text"
                               ngControl="text" #text="ngForm">
                        <div id="errortext" [hidden]="text.valid || text.pristine || text.untouched" class="alert alert-danger">
                            De nieuwe kaart vereist een beknopte omschrijving.
                        </div>
                    </div>
                    <button type="submit" class="btn btn-default" [disabled]="!organisationForm.form.valid" data-toggle="modal" data-target="#createCardModal">Aanmaken</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" (click)="onCloseModal()">Annuleren</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Trigger upvoteCardModal from code with a hidden button -->
<button type="button" style="display: none;" id="btnShowUpvoteModal" class="btn btn-primary btn-lg"
        data-toggle="modal" data-target="#upvoteCardModal">
    Hidden button
</button>

<!-- Modal -->
<div id="upvoteCardModal" class="modal fade" role="form">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{ card.text }}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <p>Deze kaart ligt op de {{ card.sessionLevel }}e cirkel</p>
                </div>
                <div class="row">
                    <button type="button" id="upvote" class="btn btn-default" data-dismiss="modal" (click)="upvoteCard()">Stem naar het midden!</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Nee bedankt.</button>
                </div>
            </div>
        </div>
    </div>
</div>